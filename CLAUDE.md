# 项目总纲

本项目分为**方案设计**和**代码开发**两个阶段。

---

## 目录结构

```text
project/
├── CLAUDE.md                # 本文件 - 总纲
├── solution/                # Phase 1: 方案设计
│   ├── CLAUDE.md            # 方案设计指南
│   ├── 1_strategy.md        # 战略层
│   ├── 2_scope.md           # 范围层
│   ├── 3_structure.md       # 结构层
│   ├── prototype/           # 原型层
│   └── app_spec.txt         # ⭐ 合并产出
└── src/                     # Phase 2: 代码开发
    ├── CLAUDE.md            # 开发指南
    ├── frontend/            # Next.js
    ├── backend/             # FastAPI
    ├── feature_list.json    # 功能列表
    └── progress.md          # 开发进度
```

---

## 工作流程

```text
Phase 1: 方案设计（人机协作）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
战略层 → 范围层 → 结构层 → 原型层
              ↓
        用户 Review 确认
              ↓
      生成 app_spec.txt
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Phase 2: 代码开发（自主模式）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
读取 app_spec.txt
        ↓
  生成 feature_list.json
        ↓
┌─────────────────────────┐
│  选择功能 → 实现 → 验证  │ ←── 循环
│      ↓                  │
│  Puppeteer 截图验证      │
│      ↓                  │
│  更新进度 → 提交代码     │
└─────────────────────────┘
        ↓
    全部完成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 阶段切换

| 用户说 | 进入 |
|-------|-----|
| `设计方案` | Phase 1: 方案设计（人机协作）|
| `生成规格` | 合并 1-4 层生成 app_spec.txt |
| `开始开发` | Phase 2: 代码开发（自主模式）|
| `当前状态` | 显示当前阶段和进度 |

---

## 原则

1. **先方案后开发**：不跳过方案直接写代码
2. **逐层推进**：每层确认后再进入下一层
3. **规格驱动**：开发严格按照 app_spec.txt 实现
4. **自主验证**：用 Puppeteer 自动验证每个功能
5. **干净退出**：每次会话结束确保代码可运行
